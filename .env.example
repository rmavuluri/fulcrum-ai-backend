# Server
PORT=3001
FRONTEND_URL=http://localhost:5173

# Ally sandbox (get token + call sandbox for /api/chat)
USE_ALLY_SANDBOX=1
SANDBOX_CLIENT_KEY=your-client-key
SANDBOX_CLIENT_SECRET=your-client-secret

# Optional overrides (defaults shown)
# ALLY_SANDBOX_MODEL_ID=openai.gpt-35-turbo-16k
# ALLY_TOKEN_ENDPOINT=https://dev.api.ally.com/v1/access/token
# ALLY_SANDBOX_PROMPT_URL=https://dev.api.ally.com/amh-gpt-sandbox/shared/curated/prompt


if (!input) return input;
  let s = String(input);

  // Mask long digit sequences (phone/account/etc.) keep last 4
  s = s.replace(/\b(\d{5,})(\d{4})\b/g, (_, p1, p2) => `${"*".repeat(p1.length)}${p2}`);

  // Mask emails
  s = s.replace(/\b([A-Z0-9._%+-])[A-Z0-9._%+-]*(@[A-Z0-9.-]+\.[A-Z]{2,})\b/gi, (_, first, domain) => {
    return `${first}***${domain}`;
  });

  return s;